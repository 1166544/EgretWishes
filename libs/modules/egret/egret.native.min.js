var egret;!function(t){var e;!function(e){var n={"source-over":[1,771],lighter:[770,1],"destination-out":[0,771],"destination-in":[0,770]},i=function(i){function r(){i.apply(this,arguments),this.$matrix=new t.Matrix,this.$nativeContext=egret_native.Canvas?null:egret_native.Graphics,this.$nativeGraphicsContext=egret_native.Canvas?null:egret_native.rastergl,this.$globalCompositeOperation="source-over",this.$globalAlpha=1,this.$lineWidth=0,this.$strokeStyle="#000000",this.$fillStyle="#000000",this.$font="10px sans-serif",this.$fontSize=10,this.clipRectArray=null,this.$saveList=[],this.$clipRectArray=[],this.$clipRect=new t.Rectangle,this.$saveCount=0,this.$clipList=[],this.$hasStrokeText=!1}__extends(r,i);var a=__define,s=r;return p=s.prototype,a(p,"globalCompositeOperation",function(){return this.$globalCompositeOperation},function(t){this.$globalCompositeOperation=t;var e=n[t];e&&(egret_native.Canvas||this.checkSurface(),this.$nativeContext.setBlendArg(e[0],e[1]))}),a(p,"globalAlpha",function(){return this.$globalAlpha},function(t){this.$globalAlpha=t,egret_native.Canvas||this.checkSurface(),this.$nativeContext.setGlobalAlpha(t)}),a(p,"lineWidth",function(){return this.$lineWidth},function(t){this.$lineWidth=t,this.$nativeContext.lineWidth=t,egret_native.Canvas?this.$nativeContext.lineWidth=t:(this.checkSurface(),this.$nativeGraphicsContext.lineWidth=t)}),a(p,"strokeStyle",function(){return this.$strokeStyle},function(t){this.$strokeStyle=t,null!=t&&(-1!=t.indexOf("rgba")?t=this.$parseRGBA(t):-1!=t.indexOf("rgb")&&(t=this.$parseRGB(t)),egret_native.Label.setStrokeColor(parseInt(t.replace("#","0x")))),egret_native.Canvas?this.$nativeContext.strokeStyle=t:(this.checkSurface(),this.$nativeGraphicsContext.strokeStyle=t)}),a(p,"fillStyle",function(){return this.$fillStyle},function(t){this.$fillStyle=t,null!=t&&(-1!=t.indexOf("rgba")?t=this.$parseRGBA(t):-1!=t.indexOf("rgb")&&(t=this.$parseRGB(t)),egret_native.Label.setTextColor(parseInt(t.replace("#","0x")))),egret_native.Canvas?this.$nativeContext.fillStyle=t:(this.checkSurface(),this.$nativeGraphicsContext.fillStyle=t)}),p.$fillColorStr=function(t){return t.length<2&&(t="0"+t),t},p.$parseRGBA=function(t){var e=t.indexOf("(");t=t.slice(e+1,t.length-1);var n=t.split(","),i=parseInt(255*parseFloat(n[3])).toString(16),r=parseInt(n[0]).toString(16),a=parseInt(n[1]).toString(16),s=parseInt(n[2]).toString(16);return t="#"+this.$fillColorStr(i)+this.$fillColorStr(r)+this.$fillColorStr(a)+this.$fillColorStr(s)},p.$parseRGB=function(t){var e=t.indexOf("(");t=t.slice(e+1,t.length-1);var n=t.split(","),i=parseInt(n[0]).toString(16),r=parseInt(n[1]).toString(16),a=parseInt(n[2]).toString(16);return t="#"+this.$fillColorStr(i)+this.$fillColorStr(r)+this.$fillColorStr(a)},a(p,"font",function(){return this.$font},function(t){this.$font=t;for(var e=t.split(" "),n=e.length,i=0;n>i;i++){var r=e[i];if(-1!=r.indexOf("px"))return void(this.$fontSize=parseInt(r.replace("px","")))}}),p.arc=function(t,e,n,i,r,a){egret_native.Canvas?this.$nativeContext.arc(t,e,n,i,r,a):(this.checkSurface(),this.$nativeGraphicsContext.arc(t,e,n,i,r,a))},p.quadraticCurveTo=function(t,e,n,i){egret_native.Canvas?this.$nativeContext.quadraticCurveTo(t,e,n,i):(this.checkSurface(),this.$nativeGraphicsContext.quadraticCurveTo(t,e,n,i))},p.lineTo=function(t,e){egret_native.Canvas?this.$nativeContext.lineTo(t,e):(this.checkSurface(),this.$nativeGraphicsContext.lineTo(t,e))},p.fill=function(t){egret_native.Canvas?this.$nativeContext.fill(t):(this.checkSurface(),this.$nativeGraphicsContext.fill(t))},p.closePath=function(){egret_native.Canvas?(this.$nativeContext.closePath(),this.clipRectArray&&(this.$clipRectArray=this.clipRectArray,this.clipRectArray=null)):(this.checkSurface(),this.$nativeGraphicsContext.closePath())},p.rect=function(t,e,n,i){egret_native.Canvas?(this.$nativeContext.rect(t,e,n,i),this.$clipRectArray.push({x:t,y:e,w:n,h:i})):(this.checkSurface(),this.$nativeGraphicsContext.rect(t,e,n,i),this.$clipRect.setTo(t,e,n,i))},p.moveTo=function(t,e){egret_native.Canvas?this.$nativeContext.moveTo(t,e):(this.checkSurface(),this.$nativeGraphicsContext.moveTo(t,e))},p.fillRect=function(t,e,n,i){egret_native.Canvas?this.$nativeContext.fillRect(t,e,n,i):(this.checkSurface(),this.$nativeGraphicsContext.fillRect(t,e,n,i))},p.bezierCurveTo=function(t,e,n,i,r,a){egret_native.Canvas?this.$nativeContext.bezierCurveTo(t,e,n,i,r,a):(this.checkSurface(),this.$nativeGraphicsContext.bezierCurveTo(t,e,n,i,r,a))},p.stroke=function(){egret_native.Canvas?this.$nativeContext.stroke():(this.checkSurface(),this.$nativeGraphicsContext.stroke())},p.strokeRect=function(t,e,n,i){egret_native.Canvas?this.$nativeContext.strokeRect(t,e,n,i):(this.checkSurface(),this.$nativeGraphicsContext.strokeRect(t,e,n,i))},p.beginPath=function(){egret_native.Canvas?(this.$nativeContext.beginPath(),this.clipRectArray=this.$clipRectArray.concat()):(this.checkSurface(),this.$nativeGraphicsContext.beginPath())},p.arcTo=function(t,e,n,i,r){egret_native.Canvas?this.$nativeContext.arcTo(t,e,n,i,r):(this.checkSurface(),this.$nativeGraphicsContext.arcTo(t,e,n,i,r))},p.transform=function(t,e,n,i,r,a){this.$matrix.append(t,e,n,i,r,a),this.setTransformToNative()},p.translate=function(t,e){this.$matrix.translate(t,e),this.setTransformToNative()},p.scale=function(t,e){this.$matrix.scale(t,e),this.setTransformToNative()},p.rotate=function(t){this.$matrix.rotate(t),this.setTransformToNative()},p.restore=function(){if(egret_native.Canvas){if(this.$saveList.length){var t=this.$saveList.pop();for(var e in t)this[e]=t[e];this.setTransformToNative(),this.$nativeContext.restore(),this.clipRectArray=null}}else if(this.$saveCount>0){if(this.$saveList.length){var t=this.$saveList.pop();for(var e in t)this[e]=t[e];this.setTransformToNative()}var n=this.$clipList.indexOf(this.$saveCount);if(-1!=n){var i=this.$clipList.length;for(this.$clipList.splice(n,i-n);i>n;n++)this.checkSurface(),this.$nativeContext.popClip()}this.$saveCount--}},p.save=function(){var e=new t.Matrix;e.copyFrom(this.$matrix),egret_native.Canvas?(this.$saveList.push({lineWidth:this.$lineWidth,globalCompositeOperation:this.$globalCompositeOperation,globalAlpha:this.$globalAlpha,strokeStyle:this.$strokeStyle,fillStyle:this.$fillStyle,font:this.$font,$matrix:e,$clipRectArray:this.$clipRectArray.concat()}),this.$nativeContext.save()):(this.$saveList.push({lineWidth:this.$lineWidth,globalCompositeOperation:this.$globalCompositeOperation,globalAlpha:this.$globalAlpha,strokeStyle:this.$strokeStyle,fillStyle:this.$fillStyle,font:this.$font,$matrix:e}),this.$saveCount++)},p.clip=function(){if(egret_native.Canvas){if(this.$clipRectArray.length>0){for(var t=[],e=0;e<this.$clipRectArray.length;e++){var n=this.$clipRectArray[e];t.push(n.x),t.push(n.y),t.push(n.w),t.push(n.h)}this.$nativeContext.pushRectStencils(t),this.$clipRectArray.length=0}}else this.$clipRect.width>0&&this.$clipRect.height>0&&(this.checkSurface(),this.$nativeContext.pushClip(this.$clipRect.x,this.$clipRect.y,this.$clipRect.width,this.$clipRect.height),this.$clipRect.setEmpty(),this.$clipList.push(this.$saveCount))},p.clearRect=function(t,e,n,i){egret_native.Canvas?this.$nativeContext.clearRect(t,e,n,i):(this.checkSurface(),this.$nativeContext.clearScreen(0,0,0))},p.setTransform=function(t,e,n,i,r,a){this.$matrix.setTo(t,e,n,i,r,a),this.setTransformToNative()},p.setTransformToNative=function(){var t=this.$matrix;egret_native.Canvas||this.checkSurface(),this.$nativeContext.setTransform(t.a,t.b,t.c,t.d,t.tx,t.ty)},p.createLinearGradient=function(t,e,n,i){return egret_native.Canvas?this.$nativeContext.createLinearGradient(t,e,n,i):(this.checkSurface(),this.$nativeGraphicsContext.createLinearGradient(t,e,n,i))},p.createRadialGradient=function(t,e,n,i,r,a){return egret_native.Canvas?this.$nativeContext.createRadialGradient(t,e,n,i,r,a):(this.checkSurface(),this.$nativeGraphicsContext.createRadialGradient(t,e,n,i,r,a))},p.fillText=function(e,n,i){var r=t.TextField.default_fontFamily;egret_native.Canvas?(this.$nativeContext.createLabel(r,this.$fontSize,"",this.$hasStrokeText?this.$lineWidth:0),this.$hasStrokeText=!1,this.$nativeContext.drawText(e,n,i)):(egret_native.Label.createLabel(r,this.$fontSize,"",this.$hasStrokeText?this.$lineWidth:0),this.$hasStrokeText=!1,egret_native.Label.drawText(e,n,i))},p.strokeText=function(){this.$hasStrokeText=!0},p.measureText=function(e){var n=t.TextField.default_fontFamily;return egret_native.Label.createLabel(n,this.$fontSize,"",this.$hasStrokeText?this.$lineWidth:0),{width:egret_native.Label.getTextSize(e)[0]}},p.drawImage=function(t,e,n,i,r,a,s,o,c){var h;h=egret_native.Canvas?t.$nativeCanvas?t.$nativeCanvas:t:t.$nativeRenderTexture?t.$nativeRenderTexture:t,h&&(3==arguments.length?(a=e,s=n,e=0,n=0,i=o=t.width,r=c=t.height):5==arguments.length?(a=e,s=n,o=i,c=r,e=0,n=0,i=t.width,r=t.height):egret_native.Canvas?(i||(i=t.width),r||(r=t.height),a||(a=0),s||(s=0),o||(o=i),c||(c=r)):(void 0==i&&(i=t.width),void 0==r&&(r=t.height),void 0==a&&(a=0),void 0==s&&(s=0),void 0==o&&(o=i),void 0==c&&(c=r)),egret_native.Canvas||this.checkSurface(),this.$nativeContext.drawImage(h,e,n,i,r,a,s,o,c))},p.createPattern=function(){return null},p.getImageData=function(t,n,i,r){var a;return egret_native.Canvas?(t!=Math.floor(t)&&(t=Math.floor(t),i++),n!=Math.floor(n)&&(n=Math.floor(n),r++),a=this.$nativeContext.getPixels(t,n,i,r)):(e.$currentSurface==this.surface&&null!=e.$currentSurface&&e.$currentSurface.end(),a=this.surface.getImageData(t,n,i,r)),a.pixelData&&(a.data=a.pixelData),a},p.checkSurface=function(){e.$currentSurface!=this.surface&&(null!=e.$currentSurface&&e.$currentSurface.end(),this.surface&&this.surface.begin())},r}(t.HashObject);e.NativeRenderContext=i,t.registerClass(i,"egret.native.NativeRenderContext",["egret.sys.RenderContext"])}(e=t["native"]||(t["native"]={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){e.$currentSurface;var n=function(t){function n(){t.call(this),this.renderContext=egret_native.Canvas?null:new e.NativeRenderContext,this.$widthReadySet=!1,this.$heightReadySet=!1,this.$isRoot=!1,this.$isDispose=!1,egret_native.Canvas&&this.init()}__extends(n,t);var i=__define,r=n;return p=r.prototype,p.init=function(){this.renderContext=new e.NativeRenderContext},p.toDataURL=function(){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(egret_native.Canvas){if(this.$nativeCanvas)return this.$nativeCanvas.toDataURL.apply(this.$nativeCanvas,arguments)}else if(this.$nativeRenderTexture)return this.$nativeRenderTexture.toDataURL.apply(this.$nativeRenderTexture,arguments);return null},p.saveToFile=function(t,e){egret_native.Canvas?this.$nativeCanvas&&this.$nativeCanvas.saveToFile&&this.$nativeCanvas.saveToFile(t,e):this.$nativeRenderTexture&&this.$nativeRenderTexture.saveToFile&&this.$nativeRenderTexture.saveToFile(t,e)},i(p,"width",function(){return this.$width},function(t){if(egret_native.Canvas){if(t>0)if(this.$width=t,this.$nativeCanvas)this.$nativeCanvas.width=t;else{this.$nativeCanvas=new egret_native.Canvas(t,1),this.$isRoot&&egret_native.setScreenCanvas(this.$nativeCanvas);var e=this.$nativeCanvas.getContext("2d");e.clearScreen(0,0,0,0),this.renderContext.$nativeContext=e}}else{if(this.$width==t)return;this.$width=t,this.$isDispose||(this.$widthReadySet=!0,this.createRenderTexture())}}),i(p,"height",function(){return this.$height},function(t){if(egret_native.Canvas){if(t>0)if(this.$height=t,this.$nativeCanvas)this.$nativeCanvas.height=t;else{this.$nativeCanvas=new egret_native.Canvas(1,t),this.$isRoot&&egret_native.setScreenCanvas(this.$nativeCanvas);var e=this.$nativeCanvas.getContext("2d");e.clearScreen(0,0,0,0),this.renderContext.$nativeContext=e}}else{if(this.$height==t)return;this.$height=t,this.$isDispose||(this.$heightReadySet=!0,this.createRenderTexture())}}),p.getImageData=function(t,e,n,i){return t!=Math.floor(t)&&(t=Math.floor(t),n++),e!=Math.floor(e)&&(e=Math.floor(e),i++),this.$nativeRenderTexture.getPixels(t,e,n,i)},p.createRenderTexture=function(){this.$isRoot||(this.$nativeRenderTexture||this.$widthReadySet&&this.$heightReadySet)&&(this.$nativeRenderTexture&&this.$nativeRenderTexture.dispose(),this.$nativeRenderTexture=new egret_native.RenderTexture(this.$width,this.$height),this.renderContext.globalAlpha=1,this.renderContext.globalCompositeOperation="source-over",this.renderContext.setTransform(1,0,0,1,0,0),this.$widthReadySet=!1,this.$heightReadySet=!1)},p.begin=function(){this.$nativeRenderTexture&&(e.$currentSurface=this,this.$nativeRenderTexture.getIn?this.$nativeRenderTexture.getIn():this.$nativeRenderTexture.begin())},p.end=function(){this.$nativeRenderTexture&&(e.$currentSurface=null,this.$nativeRenderTexture.getOut?this.$nativeRenderTexture.getOut():this.$nativeRenderTexture.end())},p.setRootCanvas=function(){egret_native.setScreenCanvas(this.$nativeCanvas)},p.$dispose=function(){egret_native.Canvas?this.$isDispose=!0:(this.$nativeRenderTexture&&(e.$currentSurface==this&&e.$currentSurface.end(),this.$nativeRenderTexture.dispose(),this.$nativeRenderTexture=null),this.$isDispose=!0)},p.$reload=function(){this.$isDispose=!1},n}(t.HashObject);e.NativeSurface=n,t.registerClass(n,"egret.native.NativeSurface",["egret.sys.Surface","egret.BitmapData"])}(e=t["native"]||(t["native"]={}))}(egret||(egret={}));var egret;!function(t){var e;!function(){function e(e,n){var i=t.sys.surfaceFactory.create(!0);if(!i)return null;var r=e.$getTextureWidth(),a=e.$getTextureHeight();null==n&&(n=t.$TempRectangle,n.x=0,n.y=0,n.width=r,n.height=a),n.x=Math.min(n.x,r-1),n.y=Math.min(n.y,a-1),n.width=Math.min(n.width,r-n.x),n.height=Math.min(n.height,a-n.y);var s=n.width,o=n.height;i.width=s,i.height=o;var c=e,h=i.renderContext;h.imageSmoothingEnabled=!1;var u=Math.round(c._offsetX),v=Math.round(c._offsetY),l=c._bitmapWidth,p=c._bitmapHeight;return h.globalAlpha=1,h.globalCompositeOperation="source-over",h.setTransform(1,0,0,1,0,0),h.drawImage(c._bitmapData,c._bitmapX+n.x/t.$TextureScaleFactor,c._bitmapY+n.y/t.$TextureScaleFactor,l*n.width/r,p*n.height/a,u,v,n.width,n.height),i}function n(n,i){try{var r=e(this,i),a=r.toDataURL(n);return r.$dispose(),a}catch(s){return t.$error(1033),null}}function i(n,i,r){try{var a=e(this,r);a.saveToFile(n,i),a.$dispose()}catch(s){t.$error(1033)}}function r(){return t.$error(1035),null}t.Texture.prototype.toDataURL=n,t.Texture.prototype.saveToFile=i,t.Texture.prototype.getPixel32=r}(e=t["native"]||(t["native"]={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var n=[],i=function(){function i(){t.sys.sharedRenderContext=this.create().renderContext}var r=(__define,i);return p=r.prototype,p.create=function(t){var i=t||n.length>3?n.pop():null;return i||(i=this.createSurface(new e.NativeSurface)),i.$reload(),i},p.release=function(t){t&&(t.$dispose(),t.width=t.height=1,n.push(t))},p.createSurface=function(t){var e=t.renderContext;return e.surface=t,t},i}();e.OpenGLFactory=i,t.registerClass(i,"egret.native.OpenGLFactory",["egret.sys.SurfaceFactory"])}(e=t["native"]||(t["native"]={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var n=function(n){function i(){n.call(this),this.init(i.option)}__extends(i,n);var r=(__define,i);return p=r.prototype,p.init=function(n){n.showPaintRect=!1;var i=new t.Stage;i.$screen=this,i.$scaleMode=n.scaleMode,i.$maxTouches=n.maxTouches,i.textureScaleFactor=n.textureScaleFactor,i.frameRate=n.frameRate,egret_native.Canvas||i.addEventListener(t.Event.ENTER_FRAME,function(){e.$currentSurface&&e.$currentSurface.end()},this);var r=t.sys.surfaceFactory.create();r.$isRoot=!0;var a=new e.NativeTouchHandler(i),s=new t.sys.Player(r.renderContext,i,n.entryClassName);if(new e.NativeHideHandler(i),s.showPaintRect(n.showPaintRect),n.showFPS||n.showLog){for(var o=n.fpsStyles||"",c=o.split(","),h={},u=0;u<c.length;u++){var v=c[u].split(":");h[v[0]]=v[1]}n.fpsStyles=h,s.displayFPS(n.showFPS,n.showLog,n.logFilter,n.fpsStyles)}this.playerOption=n,this.stage=i,this.player=s,this.nativeTouch=a,this.updateScreenSize(),this.updateMaxTouches(),s.start()},p.updateScreenSize=function(){var e=this.playerOption,n=egret_native.EGTView.getFrameWidth(),i=egret_native.EGTView.getFrameHeight(),r=t.sys.screenAdapter.calculateStageSize(this.stage.$scaleMode,n,i,e.contentWidth,e.contentHeight),a=r.stageWidth,s=r.stageHeight,o=r.displayWidth,c=r.displayHeight,h=(i-c)/2,u=(n-o)/2;egret_native.EGTView.setVisibleRect(u,h,o,c),egret_native.EGTView.setDesignSize(a,s),this.player.updateStageSize(a,s)},p.updateMaxTouches=function(){this.nativeTouch.$updateMaxTouches()},i}(t.HashObject);e.NativePlayer=n,t.registerClass(n,"egret.native.NativePlayer",["egret.sys.Screen"])}(e=t["native"]||(t["native"]={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){function n(){if(!r){r=!0;var n=t.sys.$ticker,i=function(){n.update()};egret_native.executeMainLoop(i,n),t.sys.surfaceFactory=new e.OpenGLFactory,t.sys.screenAdapter||(t.sys.screenAdapter=new t.sys.ScreenAdapter),new e.NativePlayer}}function i(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e}e.$supportCanvas=egret_native.Canvas?!0:!1;var r=!1;t.warn=function(){console.warn.apply(console,i(arguments))},t.error=function(){console.error.apply(console,i(arguments))},t.assert=function(){console.assert.apply(console,i(arguments))},t.log=function(){console.log.apply(console,i(arguments))},t.runEgret=n}(e=t["native"]||(t["native"]={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){function n(t){return egret_native.getOption(t)}e.getOption=n,t.getOption=n}(e=t["native"]||(t["native"]={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){function n(e){var n=JSON.parse(e),r=n.functionName,a=i[r];if(a){var s=n.value;a.call(null,s)}else t.$warn(1004,r)}var i={},r=function(){function t(){}var e=(__define,t);return p=e.prototype,t.call=function(t,e){var n={};n.functionName=t,n.value=e,egret_native.sendInfoToPlugin(JSON.stringify(n))},t.addCallback=function(t,e){i[t]=e},t}();e.NativeExternalInterface=r,t.registerClass(r,"egret.native.NativeExternalInterface",["egret.ExternalInterface"]),t.ExternalInterface=r,egret_native.receivedPluginInfo=n}(e=t["native"]||(t["native"]={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var n=function(n){function i(){n.call(this),this.loaded=!1}__extends(i,n);var r=(__define,i);return p=r.prototype,p.load=function(e){function n(){var n=t.PromiseObject.create();n.onSuccessFunc=r,n.onErrorFunc=s,egret_native.download(e,e,n)}function r(){h.load(),i.$recycle(this.url,h)}function a(){o(),c.loaded=!0,c.dispatchEventWith(t.Event.COMPLETE)}function s(){o(),c.dispatchEventWith(t.IOErrorEvent.IO_ERROR)}function o(){h.removeEventListener("canplaythrough",r),h.removeEventListener("error",s)}var c=this;this.url=e,egret_native.isFileExists(e)?t.$callAsync(r,c):n();var h=new Audio(e);h.addEventListener("canplaythrough",a),h.addEventListener("error",s),this.originAudio=h},p.play=function(t,n){t=+t||0,n=+n||0;var r=i.$pop(this.url);null==r?r=new Audio(this.url):r.load(),r.autoplay=!0;var a=new e.NativeSoundChannel(r);return a.$url=this.url,a.$loops=n,a.$startTime=t,a.$play(),a},p.close=function(){0==this.loaded&&this.originAudio&&(this.originAudio.src=""),this.originAudio&&(this.originAudio=null),i.$clear(this.url)},i.$clear=function(t){var e=i.audios[t];e&&(e.length=0)},i.$pop=function(t){var e=i.audios[t];return e&&e.length>0?e.pop():null},i.$recycle=function(t,e){var n=i.audios[t];null==i.audios[t]&&(n=i.audios[t]=[]),n.push(e)},i.MUSIC="music",i.EFFECT="effect",i.audios={},i}(t.EventDispatcher);e.NativeSound=n,t.registerClass(n,"egret.native.NativeSound",["egret.Sound"]),__global.Audio&&(t.Sound=n)}(e=t["native"]||(t["native"]={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var n=function(n){function i(e){var i=this;n.call(this),this.$startTime=0,this.audio=null,this.isStopped=!1,this.onPlayEnd=function(){return 1==i.$loops?(i.stop(),void i.dispatchEventWith(t.Event.SOUND_COMPLETE)):(i.$loops>0&&i.$loops--,i.audio.load(),void i.$play())},e.addEventListener("ended",this.onPlayEnd),this.audio=e}__extends(i,n);var r=__define,a=i;return p=a.prototype,p.$play=function(){if(this.isStopped)return void t.$error(1036);try{this.audio.currentTime=this.$startTime}catch(e){}finally{this.audio.play()}},p.stop=function(){if(this.audio){var t=this.audio;t.pause(),t.removeEventListener("ended",this.onPlayEnd),this.audio=null,e.NativeSound.$recycle(this.$url,t)}},r(p,"volume",function(){return this.audio?this.audio.volume:1},function(e){return this.isStopped?void t.$error(1036):void(this.audio&&(this.audio.volume=e))}),r(p,"position",function(){return this.audio?this.audio.currentTime:0}),i}(t.EventDispatcher);e.NativeSoundChannel=n,t.registerClass(n,"egret.native.NativeSoundChannel",["egret.SoundChannel","egret.IEventDispatcher"])}(e=t["native"]||(t["native"]={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var n=function(n){function i(){n.call(this),this.loaded=!1}__extends(i,n);var r=(__define,i);return p=r.prototype,p.load=function(e){function n(){var n=t.PromiseObject.create();n.onSuccessFunc=i,n.onErrorFunc=function(){t.IOErrorEvent.dispatchIOErrorEvent(r)},egret_native.download(e,e,n)}function i(){r.loaded=!0,r.preload()}var r=this;this.url=e,egret_native.isFileExists(e)?t.$callAsync(i,r):n()},p.preload=function(){var e=this;if(e.type==t.Sound.EFFECT){var n=new t.PromiseObject;n.onSuccessFunc=function(){e.dispatchEventWith(t.Event.COMPLETE)},egret_native.Audio.preloadEffectAsync(e.url,n)}else e.dispatchEventWith(t.Event.COMPLETE)},p.play=function(t,n){t=+t||0,n=+n||0;var i=new e.NaSoundChannel;return i.$url=this.url,i.$loops=n,i.$type=this.type,i.$startTime=t,i.$play(),i},p.close=function(){},i.MUSIC="music",i.EFFECT="effect",i}(t.EventDispatcher);e.NaSound=n,t.registerClass(n,"egret.native.NaSound",["egret.Sound"]),__global.Audio||(t.Sound=n)}(e=t["native"]||(t["native"]={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var n=function(e){function n(){e.call(this),this.$startTime=0,this.isStopped=!1}__extends(n,e);var i=__define,r=n;return p=r.prototype,p.$play=function(){this.isStopped=!1,this.$type==t.Sound.EFFECT?this._effectId=egret_native.Audio.playEffect(this.$url,1!=this.$loops):(n.currentPath=this.$url,egret_native.Audio.playBackgroundMusic(this.$url,1!=this.$loops))},p.stop=function(){this.isStopped=!0,this.$type==t.Sound.EFFECT?this._effectId&&(egret_native.Audio.stopEffect(this._effectId),this._effectId=null):this.$url==n.currentPath&&egret_native.Audio.stopBackgroundMusic(!1)},i(p,"volume",function(){return this.$type==t.Sound.EFFECT?egret_native.Audio.getEffectsVolume():egret_native.Audio.getBackgroundMusicVolume()},function(e){this.$type==t.Sound.EFFECT?egret_native.Audio.setEffectsVolume(e):egret_native.Audio.setBackgroundMusicVolume(e)}),i(p,"position",function(){return 0}),n}(t.EventDispatcher);e.NaSoundChannel=n,t.registerClass(n,"egret.native.NaSoundChannel",["egret.SoundChannel","egret.IEventDispatcher"])}(e=t["native"]||(t["native"]={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var n;!function(){function n(t){return c[t]}function i(e,n){c[e]=n;try{return s(),!0}catch(i){return t.$warn(1018,e,n),!1}}function r(t){delete c[t],s()}function a(){for(var t in c)delete c[t];s()}function s(){egret_native.saveRecord(o,JSON.stringify(c))}var o="LocalStorage.local",c={};if(egret_native.isRecordExists(o)){var h=egret_native.loadRecord(o);try{c=JSON.parse(h)}catch(u){c={}}}else c={};e.getItem=n,e.setItem=i,e.removeItem=r,e.clear=a}(n=e["native"]||(e["native"]={}))}(e=t.localStorage||(t.localStorage={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var n=function(e){function n(n){e.call(this),egret_native.pauseApp=function(){n.dispatchEvent(new t.Event(t.Event.DEACTIVATE)),egret_native.Audio.pauseBackgroundMusic(),egret_native.Audio.pauseAllEffects()},egret_native.resumeApp=function(){n.dispatchEvent(new t.Event(t.Event.ACTIVATE)),egret_native.Audio.resumeBackgroundMusic(),egret_native.Audio.resumeAllEffects()}}__extends(n,e);var i=(__define,n);return p=i.prototype,n}(t.HashObject);e.NativeHideHandler=n,t.registerClass(n,"egret.native.NativeHideHandler")}(e=t["native"]||(t["native"]={}))}(egret||(egret={}));var egret;!function(t){var e=function(e){function n(){e.apply(this,arguments),this._downCount=0,this._path=null,this._bytesTotal=0}__extends(n,e);var i=(__define,n);return p=i.prototype,p.load=function(t,e){this._downCount=0,this._path=t,this._bytesTotal=e,this.reload()},p.reload=function(){if(this._downCount>=3)return void this.downloadFileError();this._downCount++;var e=t.PromiseObject.create(),n=this;e.onSuccessFunc=function(){n.loadOver()},e.onErrorFunc=function(){n.reload()},e.downloadingSizeFunc=function(t){n.downloadingProgress(t)},egret_native.download(this._path,this._path,e)},p.downloadingProgress=function(e){t.ProgressEvent.dispatchProgressEvent(this,t.ProgressEvent.PROGRESS,e,this._bytesTotal)},p.downloadFileError=function(){this.dispatchEvent(new t.Event(t.IOErrorEvent.IO_ERROR))},p.loadOver=function(){this.dispatchEvent(new t.Event(t.Event.COMPLETE))},n}(t.EventDispatcher);t.NativeResourceLoader=e,t.registerClass(e,"egret.NativeResourceLoader")}(egret||(egret={}));var egret;!function(t){var e;!function(e){var n=function(e){function n(n){e.call(this),this.$touch=new t.sys.TouchHandler(n);var i=this;egret_native.onTouchesBegin=function(t,e,n,r){i.$executeTouchCallback(t,e,n,r,i.$touch.onTouchBegin)},egret_native.onTouchesMove=function(t,e,n,r){i.$executeTouchCallback(t,e,n,r,i.$touch.onTouchMove)},egret_native.onTouchesEnd=function(t,e,n,r){i.$executeTouchCallback(t,e,n,r,i.$touch.onTouchEnd)},egret_native.onTouchesCancel=function(){}}__extends(n,e);var i=(__define,n);return p=i.prototype,p.$executeTouchCallback=function(t,e,n,i,r){for(var a=0;t>a;a++){var s=e[a],o=n[a],c=i[a];r.call(this.$touch,o,c,s)}},p.$updateMaxTouches=function(){this.$touch.$initMaxTouches()},n}(t.HashObject);e.NativeTouchHandler=n,t.registerClass(n,"egret.native.NativeTouchHandler")}(e=t["native"]||(t["native"]={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var n=function(e){function n(){e.call(this),this._url="",this._method=""}__extends(n,e);var i=__define,r=n;return p=r.prototype,i(p,"response",function(){return this._response}),i(p,"responseType",function(){return this._responseType},function(t){this._responseType=t}),i(p,"withCredentials",function(){return this._withCredentials},function(t){this._withCredentials=t}),p.open=function(t,e){void 0===e&&(e="GET"),this._url=t,this._method=e},p.send=function(){function e(){var e=new t.PromiseObject;e.onSuccessFunc=function(e){r._response=e,t.Event.dispatchEvent(r,t.Event.COMPLETE)},egret_native.readFileAsync(r._url,e)}function n(){var e=t.PromiseObject.create();e.onSuccessFunc=i,e.onErrorFunc=function(){t.Event.dispatchEvent(r,t.IOErrorEvent.IO_ERROR)},egret_native.download(r._url,r._url,e)}function i(){var e=egret_native.readFileSync(r._url);r._response=e,t.Event.dispatchEvent(r,t.Event.COMPLETE)}var r=this;egret_native.isFileExists(r._url)?e():n()},p.abort=function(){},p.getAllResponseHeaders=function(){return""},p.setRequestHeader=function(t,e){this.header=t,this.headerValue=e},p.getResponseHeader=function(){return""},n}(t.EventDispatcher);e.NativeHttpRequest=n,t.registerClass(n,"egret.native.NativeHttpRequest",["egret.HttpRequest"]),t.HttpRequest=n}(e=t["native"]||(t["native"]={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var n=function(n){function i(){n.apply(this,arguments),this.data=null,this.crossOrigin=null}__extends(i,n);var r=(__define,i);return p=r.prototype,p.load=function(t){this.check(t)},p.check=function(t){var e=this;e.isNetUrl(t)?e.download(t):egret_native.isFileExists(t)?e.loadTexture(t):e.download(t)},p.download=function(e){var n=this,i=t.PromiseObject.create();i.onSuccessFunc=function(){n.loadTexture(e)},i.onErrorFunc=function(){n.dispatchEventWith(t.IOErrorEvent.IO_ERROR)},egret_native.download(e,e,i)},p.loadTexture=function(n){var i=this,r=new t.PromiseObject;r.onSuccessFunc=function(n){i.data=e.toBitmapData(n),i.dispatchEventWith(t.Event.COMPLETE)},r.onErrorFunc=function(){i.dispatchEventWith(t.IOErrorEvent.IO_ERROR)},egret_native.Texture.addTextureAsyn(n,r)},p.isNetUrl=function(t){return-1!=t.indexOf("http://")},i}(t.EventDispatcher);e.NativeImageLoader=n,t.registerClass(n,"egret.native.NativeImageLoader",["egret.ImageLoader"]),t.ImageLoader=n}(e=t["native"]||(t["native"]={}))}(egret||(egret={}));var egret;!function(t){var e=function(e){function n(){e.call(this),this.textValue="",this.isFinishDown=!1,this.textValue=""}__extends(n,e);var i=(__define,n);return p=i.prototype,p.$getText=function(){return this.textValue||(this.textValue=""),this.textValue},p.$setText=function(t){return this.textValue=t,!0},p.$onBlur=function(){},p.showScreenKeyboard=function(){var e=this;e.dispatchEvent(new t.Event("focus")),t.Event.dispatchEvent(e,"focus",!1,{showing:!0}),egret_native.EGT_TextInput=function(n){e.$textfield.multiline?e.isFinishDown&&(e.isFinishDown=!1,e.textValue=n,e.dispatchEvent(new t.Event("updateText"))):(e.textValue=n.replace(/[\n|\r]/,""),egret_native.TextInputOp.setKeybordOpen(!1),e.dispatchEvent(new t.Event("updateText")),e.dispatchEvent(new t.Event("blur")))},egret_native.EGT_keyboardFinish=function(){e.$textfield.multiline&&(e.isFinishDown=!0),e.dispatchEvent(new t.Event("blur"))}},p.$show=function(){var t=this;egret_native.EGT_getTextEditerContentText=function(){return t.$getText()},egret_native.EGT_keyboardDidShow=function(){t.showScreenKeyboard(),egret_native.EGT_keyboardDidShow=function(){}};var e=this.$textfield,n=e.multiline?0:6,i=-1,r=1,a=e.maxChars<=0?-1:e.maxChars;egret_native.TextInputOp.setKeybordOpen(!0,JSON.stringify({inputMode:n,inputFlag:i,returnType:r,maxLength:a}))},p.$hide=function(){this.dispatchEvent(new t.Event("blur")),egret_native.TextInputOp.setKeybordOpen(!1)},p.$resetStageText=function(){},p.$addToStage=function(){},p.$removeFromStage=function(){},p.$setTextField=function(t){return this.$textfield=t,!0},n}(t.EventDispatcher);t.NativeStageText=e,t.registerClass(e,"egret.NativeStageText",["egret.StageText"]),t.StageText=e}(egret||(egret={}));var egret;!function(t){var e;!function(e){function n(t){var e=egret_native.xmlStr2JsonStr(t),n=JSON.parse(e);return i(n,null)}function i(t,e){if("parsererror"==t.localName)throw new Error(t.textContent);var n=new a(t.localName,e,t.prefix,t.namespace,t.name),r=t.attributes,o=n.attributes;for(var c in r)o[c]=r[c];for(var h=t.children,u=h.length,v=n.children,l=0;u>l;l++){var p=h[l],f=p.nodeType,d=null;if(1==f)d=i(p,n);else if(3==f){var g=p.text.trim();g&&(d=new s(g,n))}d&&v.push(d)}return n}var r=function(){function t(t,e){this.nodeType=t,this.parent=e}var e=(__define,t);return p=e.prototype,t}();e.XMLNode=r,t.registerClass(r,"egret.web.XMLNode");var a=function(t){function e(e,n,i,r,a){t.call(this,1,n),this.attributes={},this.children=[],this.localName=e,this.prefix=i,this.namespace=r,this.name=a}__extends(e,t);var n=(__define,e);return p=n.prototype,e}(r);e.XML=a,t.registerClass(a,"egret.web.XML");var s=function(t){function e(e,n){t.call(this,3,n),this.text=e}__extends(e,t);var n=(__define,e);return p=n.prototype,e}(r);e.XMLText=s,t.registerClass(s,"egret.web.XMLText"),t.XML={parse:n}}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(){}(e=t["native"]||(t["native"]={}))}(egret||(egret={}));